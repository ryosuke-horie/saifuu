# DELETE エンドポイントの互換性について

## 概要

本プロジェクトのDELETEエンドポイントは、RESTful APIの標準に従い、成功時に`204 No Content`ステータスコードを返します。

## HTTPステータスコードの仕様

### 成功時: 204 No Content
- リソースの削除が成功した場合
- レスポンスボディは空（Content-Length: 0）
- クライアントは追加のコンテンツを期待すべきではない

### エラー時のステータスコード
- **400 Bad Request**: 無効なIDフォーマット（例：数値以外のID）
- **404 Not Found**: 存在しないリソースの削除を試みた場合
- **500 Internal Server Error**: サーバー側のエラー

## クライアント実装時の注意点

### フロントエンドでの実装例
```typescript
// 削除リクエスト
const response = await fetch(`/api/transactions/${id}`, {
  method: 'DELETE',
});

if (response.status === 204) {
  // 削除成功 - ボディは空なのでresponse.json()を呼ばない
  console.log('削除成功');
} else {
  // エラー時はJSONレスポンスを含む
  const error = await response.json();
  console.error('削除失敗:', error);
}
```

### 重要な注意事項
1. **204レスポンスにはボディがない**: `response.json()`を呼ぶとエラーになります
2. **Content-Lengthヘッダー**: 環境によっては設定されない場合があります
3. **エラーレスポンス**: エラー時（4xx, 5xx）はJSON形式のエラーメッセージを含みます

## 既存クライアントとの互換性

現在のフロントエンド実装は204ステータスコードを正しく処理しています。新規実装や変更時も同様の処理を維持してください。

## 将来的な変更について

HTTPステータスコードの変更（例：204から200への変更）は、既存のクライアントとの互換性を破壊する可能性があるため、慎重に検討する必要があります。変更する場合は：

1. 段階的な移行計画を策定
2. クライアント側のバージョン管理
3. 適切な非推奨期間の設定

これらを考慮して実施してください。