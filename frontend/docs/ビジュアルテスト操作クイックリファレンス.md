# ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ†ã‚¹ãƒˆæ“ä½œã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

## ğŸš€ ã™ãã«ä½¿ãˆã‚‹ã‚³ãƒãƒ³ãƒ‰é›†

### åŸºæœ¬æ“ä½œ

```bash
# ç¾åœ¨ã®çŠ¶æ…‹ç¢ºèª
npm run baseline:status

# æ–°ã—ã„ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ç”»åƒã‚’ä½œæˆ
npm run baseline:create

# æ—¢å­˜ã®ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ç”»åƒã‚’æ›´æ–°ï¼ˆãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä»˜ãï¼‰
npm run baseline:update

# å·®åˆ†ç”»åƒã‚’ç¢ºèª
npm run baseline:diff

# ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ç”»åƒã®æ•´åˆæ€§æ¤œè¨¼
npm run baseline:validate
```

### æ—¥å¸¸çš„ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

#### ğŸ†• æ–°ã—ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¿½åŠ ã—ãŸæ™‚

```bash
# 1. ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€visual-testã‚¿ã‚°ã‚’è¿½åŠ 
# 2. ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ç”»åƒã‚’ä½œæˆ
npm run baseline:create

# 3. çµæœã‚’ç¢ºèª
npm run baseline:status

# 4. ã‚³ãƒŸãƒƒãƒˆ
git add __vis__/
git commit -m "feat: æ–°ã—ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ç”»åƒã‚’è¿½åŠ "
```

#### ğŸ”§ æ—¢å­˜ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä¿®æ­£ã—ãŸæ™‚

```bash
# 1. ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm run test:visual

# 2. å·®åˆ†ã‚’ç¢ºèª
npm run baseline:diff

# 3. æ„å›³ã—ãŸå¤‰æ›´ã®å ´åˆã€ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ›´æ–°
npm run baseline:update

# 4. ã‚³ãƒŸãƒƒãƒˆ
git add __vis__/
git commit -m "fix: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è¦–è¦šçš„ä¿®æ­£ã‚’ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã«åæ˜ "
```

#### ğŸ§¹ å®šæœŸçš„ãªãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

```bash
# é€±æ¬¡å®Ÿè¡Œ
npm run baseline:validate  # æ•´åˆæ€§ç¢ºèª
npm run baseline:clean     # ä¸è¦ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤

# æœˆæ¬¡å®Ÿè¡Œ
npm run baseline:backup    # ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
```

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### âŒ CI ã§å·®åˆ†ãŒæ¤œå‡ºã•ã‚ŒãŸæ™‚

```bash
# 1. GitHub Actionsã‹ã‚‰ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
# 2. å·®åˆ†ç”»åƒã‚’ç¢ºèª
# 3. æ„å›³ã—ãŸå¤‰æ›´ã®å ´åˆã€ãƒ­ãƒ¼ã‚«ãƒ«ã§æ›´æ–°
npm run baseline:update

# 4. ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥
git add __vis__/
git commit -m "fix: ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ†ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ›´æ–°"
git push
```

#### ğŸ”„ é–“é•ã£ã¦ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚’æ›´æ–°ã—ã¦ã—ã¾ã£ãŸæ™‚

```bash
# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¸€è¦§ã‚’ç¢ºèª
./scripts/baseline-manager.sh restore

# ç‰¹å®šã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒ
./scripts/baseline-manager.sh restore backup_20231201_120000
```

## ğŸ¯ ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³åˆ¥å¯¾å¿œ

### ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ã®å¤‰æ›´

```bash
# ãƒ¢ãƒã‚¤ãƒ«è¡¨ç¤ºã®ã¿æ›´æ–°
./scripts/baseline-manager.sh update --viewport mobile

# å…¨ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆæ›´æ–°
npm run baseline:update
```

### ç‰¹å®šã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã¿æ›´æ–°

```bash
# Dialogã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã¿
./scripts/baseline-manager.sh update --component Dialog

# è¤‡æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
./scripts/baseline-manager.sh update --component Dialog
./scripts/baseline-manager.sh update --component Button
```

### å¤§è¦æ¨¡ãªå¤‰æ›´ã®å ´åˆ

```bash
# 1. äº‹å‰ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
npm run baseline:backup

# 2. æ®µéšçš„æ›´æ–°
./scripts/baseline-manager.sh update --component Header
git add __vis__/ && git commit -m "fix: Headerã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ›´æ–°"

./scripts/baseline-manager.sh update --component Dialog
git add __vis__/ && git commit -m "fix: Dialogã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ›´æ–°"

# 3. å…¨ä½“ç¢ºèª
npm run baseline:validate
```

## ğŸ”§ é«˜åº¦ãªæ“ä½œ

### ä¹¾ç‡¥å®Ÿè¡Œï¼ˆå®Ÿéš›ã®å¤‰æ›´ãªã—ã§ç¢ºèªï¼‰

```bash
./scripts/baseline-manager.sh update --dry-run
./scripts/baseline-manager.sh clean --dry-run
```

### å¼·åˆ¶å®Ÿè¡Œï¼ˆç¢ºèªãªã—ï¼‰

```bash
./scripts/baseline-manager.sh update --force
./scripts/baseline-manager.sh clean --force
```

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä»˜ãæ“ä½œ

```bash
./scripts/baseline-manager.sh update --backup
./scripts/baseline-manager.sh clean --backup
```

## ğŸ“Š çŠ¶æ…‹ç¢ºèªã‚³ãƒãƒ³ãƒ‰

```bash
# è©³ç´°ãªçŠ¶æ…‹è¡¨ç¤º
npm run baseline:status

# æ•´åˆæ€§æ¤œè¨¼
npm run baseline:validate

# å·®åˆ†ç”»åƒã®è©³ç´°
npm run baseline:diff

# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¸€è¦§
./scripts/baseline-manager.sh restore
```

## ğŸš¨ ç·Šæ€¥æ™‚å¯¾å¿œ

### ã™ã¹ã¦ã®ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚’å†ä½œæˆ

```bash
# 1. ç¾åœ¨ã®ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
npm run baseline:backup

# 2. ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‰Šé™¤
rm -rf __vis__/

# 3. æ–°ã—ã„ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚’ä½œæˆ
npm run baseline:create

# 4. ç¢ºèª
npm run baseline:validate
```

### CIãŒå¤±æ•—ã—ç¶šã‘ã‚‹å ´åˆ

```bash
# 1. ãƒ­ãƒ¼ã‚«ãƒ«ã§CIã¨åŒã˜ç’°å¢ƒã§å®Ÿè¡Œ
npm run ci:visual

# 2. å•é¡Œã®ç‰¹å®š
npm run baseline:validate

# 3. CIç”¨ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ›´æ–°
npm run ci:baseline:update
```

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
frontend/
â”œâ”€â”€ __vis__/                    # ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ç”»åƒï¼ˆGitç®¡ç†ï¼‰
â”œâ”€â”€ __vis_backup__/             # ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆGité™¤å¤–ï¼‰
â”œâ”€â”€ visual-test-artifacts/      # CIç”Ÿæˆã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆï¼ˆGité™¤å¤–ï¼‰
â”œâ”€â”€ visual-test.config.json     # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ scripts/
    â”œâ”€â”€ baseline-manager.sh     # ãƒ¡ã‚¤ãƒ³ç®¡ç†ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
    â””â”€â”€ ci-baseline-manager.sh  # CIç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```

## ğŸ¨ Storybookã§ã®ç¢ºèª

```bash
# Storybookã‚’èµ·å‹•
npm run storybook

# ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:6006 ã‚’é–‹ã
# ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ã€ŒTags: visual-testã€ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ä½¿ç”¨
# ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã®ã¿è¡¨ç¤º
```

## ğŸ“– è©³ç´°æƒ…å ±

- [è©³ç´°ã‚¬ã‚¤ãƒ‰](./ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ†ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ç®¡ç†ã‚¬ã‚¤ãƒ‰.md)
- [Storybookè¨­å®šã‚¬ã‚¤ãƒ‰](./Storybookãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ†ã‚¹ãƒˆè¨­å®šã‚¬ã‚¤ãƒ‰.md)
- [è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](../visual-test.config.json)

---

ğŸ’¡ **ãƒ’ãƒ³ãƒˆ**: å›°ã£ãŸã¨ãã¯ `npm run baseline:help` ã§ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤ºã§ãã¾ã™ã€‚