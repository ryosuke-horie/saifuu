# スタイリングガイド

## 概要

SaifuuではTailwind CSS v4を採用し、ユーティリティファーストのアプローチでスタイリングを行います。一貫性のあるデザインシステムを構築し、保守性の高いスタイルコードを実現します。

## Tailwind CSS の基本方針

### 1. ユーティリティファースト
コンポーネントのスタイルは、Tailwindのユーティリティクラスを組み合わせて実装します。

```typescript
// 基本的な使用例
<div className="flex items-center justify-between p-4 bg-white rounded-lg shadow-sm">
  <h2 className="text-lg font-semibold text-gray-900">支出一覧</h2>
  <button className="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700">
    新規追加
  </button>
</div>
```

### 2. レスポンシブデザイン
モバイルファーストのアプローチで、画面サイズに応じたスタイルを適用します。

```typescript
// レスポンシブな例
<div className="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
  {/* カードコンポーネント */}
</div>

// コンテナの最大幅制御
<main className="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
  {/* コンテンツ */}
</main>
```

## デザイントークン

### カラーパレット
```css
/* tailwind.config.ts で定義 */
{
  colors: {
    primary: {
      50: '#eff6ff',
      500: '#3b82f6',
      600: '#2563eb',
      700: '#1d4ed8',
    },
    success: {
      50: '#f0fdf4',
      500: '#22c55e',
      600: '#16a34a',
    },
    danger: {
      50: '#fef2f2',
      500: '#ef4444',
      600: '#dc2626',
    },
    gray: {
      50: '#f9fafb',
      100: '#f3f4f6',
      900: '#111827',
    }
  }
}
```

### スペーシングシステム
```typescript
// 一貫したスペーシングの使用
const spacing = {
  xs: 'p-2',    // 8px
  sm: 'p-3',    // 12px
  md: 'p-4',    // 16px
  lg: 'p-6',    // 24px
  xl: 'p-8',    // 32px
};
```

### タイポグラフィ
```typescript
// テキストスタイルの定義
const typography = {
  h1: 'text-3xl font-bold tracking-tight',
  h2: 'text-2xl font-semibold',
  h3: 'text-xl font-semibold',
  body: 'text-base text-gray-900',
  small: 'text-sm text-gray-600',
  caption: 'text-xs text-gray-500',
};
```

## コンポーネントスタイリングパターン

### 1. 基本コンポーネント
```typescript
// components/common/Button.tsx
import { cn } from '@/lib/utils';

type ButtonVariant = 'primary' | 'secondary' | 'danger' | 'ghost';
type ButtonSize = 'sm' | 'md' | 'lg';

const buttonVariants = {
  primary: 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500',
  secondary: 'bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500',
  danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',
  ghost: 'bg-transparent hover:bg-gray-100 focus:ring-gray-500',
};

const buttonSizes = {
  sm: 'px-3 py-1.5 text-sm',
  md: 'px-4 py-2 text-base',
  lg: 'px-6 py-3 text-lg',
};

export function Button({
  variant = 'primary',
  size = 'md',
  className,
  children,
  ...props
}: ButtonProps) {
  return (
    <button
      className={cn(
        'inline-flex items-center justify-center font-medium rounded-md',
        'transition-colors duration-200',
        'focus:outline-none focus:ring-2 focus:ring-offset-2',
        'disabled:opacity-50 disabled:cursor-not-allowed',
        buttonVariants[variant],
        buttonSizes[size],
        className
      )}
      {...props}
    >
      {children}
    </button>
  );
}
```

### 2. 複合コンポーネント
```typescript
// components/features/expenses/ExpenseCard.tsx
const ExpenseCard = {
  Root: ({ children, className }: { children: ReactNode; className?: string }) => (
    <article
      className={cn(
        'bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow',
        'border border-gray-200',
        className
      )}
    >
      {children}
    </article>
  ),
  
  Header: ({ children }: { children: ReactNode }) => (
    <header className="flex items-center justify-between p-4 border-b border-gray-100">
      {children}
    </header>
  ),
  
  Body: ({ children }: { children: ReactNode }) => (
    <div className="p-4 space-y-2">
      {children}
    </div>
  ),
  
  Footer: ({ children }: { children: ReactNode }) => (
    <footer className="flex items-center justify-end gap-2 p-4 bg-gray-50 rounded-b-lg">
      {children}
    </footer>
  ),
};
```

## スタイルユーティリティ

### cn関数の実装
```typescript
// lib/utils.ts
import { clsx, type ClassValue } from 'clsx';
import { twMerge } from 'tailwind-merge';

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
```

### 条件付きスタイリング
```typescript
// 条件に基づくクラスの適用
<div
  className={cn(
    'p-4 rounded-lg border',
    isActive && 'border-blue-500 bg-blue-50',
    !isActive && 'border-gray-300 bg-white',
    isError && 'border-red-500 bg-red-50'
  )}
>
  {/* コンテンツ */}
</div>

// データ属性を使用したスタイリング
<div
  data-state={isOpen ? 'open' : 'closed'}
  className="data-[state=open]:animate-in data-[state=closed]:animate-out"
>
  {/* コンテンツ */}
</div>
```

## アニメーション

### 基本的なトランジション
```typescript
// ホバーエフェクト
<button className="transition-all duration-200 hover:scale-105 active:scale-95">
  クリック
</button>

// カラートランジション
<div className="transition-colors duration-300 hover:bg-gray-100">
  ホバーで背景色が変化
</div>
```

### カスタムアニメーション
```css
/* global.css */
@keyframes slide-up {
  from {
    transform: translateY(10px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out;
}
```

```typescript
// 使用例
<div className="animate-slide-up">
  {/* スライドアップするコンテンツ */}
</div>
```

## ダークモード対応

### カラースキームの切り替え
```typescript
// ダークモード対応のスタイル
<div className="bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-100">
  <h1 className="text-2xl font-bold text-gray-900 dark:text-white">
    タイトル
  </h1>
  <p className="text-gray-600 dark:text-gray-400">
    説明文
  </p>
</div>

// ダークモード専用のユーティリティ
const Card = () => (
  <div className="rounded-lg border border-gray-200 dark:border-gray-700 
                  shadow-sm dark:shadow-none dark:bg-gray-800">
    {/* カードコンテンツ */}
  </div>
);
```

## フォームスタイリング

### 入力フィールド
```typescript
// components/common/Input.tsx
export function Input({ error, ...props }: InputProps) {
  return (
    <input
      className={cn(
        'w-full rounded-md border px-3 py-2',
        'text-gray-900 placeholder-gray-500',
        'focus:outline-none focus:ring-2 focus:ring-offset-2',
        'disabled:bg-gray-100 disabled:cursor-not-allowed',
        error
          ? 'border-red-500 focus:ring-red-500'
          : 'border-gray-300 focus:border-blue-500 focus:ring-blue-500'
      )}
      {...props}
    />
  );
}
```

### フォームレイアウト
```typescript
// フォームのグリッドレイアウト
<form className="space-y-6">
  <div className="grid grid-cols-1 gap-6 sm:grid-cols-2">
    <div>
      <label className="block text-sm font-medium text-gray-700 mb-2">
        金額
      </label>
      <Input type="number" placeholder="0" />
    </div>
    
    <div>
      <label className="block text-sm font-medium text-gray-700 mb-2">
        カテゴリ
      </label>
      <Select options={categories} />
    </div>
  </div>
  
  <div className="flex items-center justify-end gap-4">
    <Button variant="ghost">キャンセル</Button>
    <Button type="submit">保存</Button>
  </div>
</form>
```

## レイアウトパターン

### 1. センタリングレイアウト
```typescript
// ページコンテナ
<div className="min-h-screen flex items-center justify-center p-4">
  <div className="w-full max-w-md">
    {/* センタリングされたコンテンツ */}
  </div>
</div>
```

### 2. サイドバーレイアウト
```typescript
// 2カラムレイアウト
<div className="flex h-screen">
  {/* サイドバー */}
  <aside className="w-64 bg-gray-50 border-r border-gray-200">
    {/* サイドバーコンテンツ */}
  </aside>
  
  {/* メインコンテンツ */}
  <main className="flex-1 overflow-y-auto">
    <div className="p-6">
      {/* ページコンテンツ */}
    </div>
  </main>
</div>
```

### 3. グリッドレイアウト
```typescript
// カードグリッド
<div className="grid grid-cols-1 gap-4 
                sm:grid-cols-2 
                lg:grid-cols-3 
                xl:grid-cols-4">
  {items.map(item => (
    <Card key={item.id} {...item} />
  ))}
</div>
```

## パフォーマンス最適化

### 1. PurgeCSS設定
```javascript
// tailwind.config.ts
module.exports = {
  content: [
    './src/**/*.{js,ts,jsx,tsx}',
    './components/**/*.{js,ts,jsx,tsx}',
  ],
  // 未使用のスタイルを削除
};
```

### 2. 重要なスタイルの分離
```typescript
// クリティカルCSSの分離
// app/layout.tsx
export default function RootLayout({ children }) {
  return (
    <html>
      <head>
        <style dangerouslySetInnerHTML={{ __html: criticalCSS }} />
      </head>
      <body>{children}</body>
    </html>
  );
}
```

## アクセシビリティ

### フォーカススタイル
```typescript
// 適切なフォーカススタイル
<button className="focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2">
  アクセシブルなボタン
</button>

// スクリーンリーダー専用スタイル
<span className="sr-only">追加情報</span>
```

### カラーコントラスト
```typescript
// WCAG AA準拠のコントラスト比
const accessibleColors = {
  primary: 'bg-blue-600 text-white',    // 4.5:1以上
  secondary: 'bg-gray-200 text-gray-900', // 7:1以上
};
```

## スタイルガイドラインのまとめ

### Do's ✅
- Tailwindのユーティリティクラスを優先的に使用
- 一貫したスペーシングシステムに従う
- レスポンシブデザインを考慮
- アクセシビリティを確保
- cn()関数で条件付きスタイルを管理

### Don'ts ❌
- インラインスタイルの過度な使用
- グローバルCSSの追加（必要最小限に）
- !importantの使用（特別な理由がない限り）
- 深いネストのセレクタ
- ハードコードされた値（デザイントークンを使用）