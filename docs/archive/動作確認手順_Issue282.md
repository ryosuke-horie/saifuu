# Issue #282 動作確認手順

## 概要
Issue #282で実装した新しい支出カテゴリの追加と、カテゴリ管理の設定ファイルベースへの移行について動作確認を行います。

## 開発環境
- **フロントエンド**: http://localhost:3001
- **API**: http://localhost:5174
- **データベース**: 開発用SQLite（マイグレーション適用済み）

## 確認項目

### 1. 新しいカテゴリの表示確認

#### 支出登録画面での確認
1. ブラウザで http://localhost:3001 を開く
2. 「支出・収入を記録」セクションへ移動
3. 「支出」タブを選択
4. カテゴリのドロップダウンを開く
5. 以下の新カテゴリが表示されることを確認：
   - **システム関係日**（紫色 #9B59B6）
   - **書籍代**（青色 #1E8BC3）
   - **家賃・水道・光熱・通信費**（オレンジ色 #D35400）

#### カテゴリの順序確認
- 支出カテゴリが以下の順序で表示されることを確認：
  1. 家賃・水道・光熱・通信費
  2. 住居費
  3. 食費
  4. 交通費
  5. 仕事・ビジネス
  6. システム関係日
  7. 学習・教育
  8. 書籍代
  9. エンターテイメント
  10. 健康・フィットネス
  11. 買い物
  12. その他

### 2. 支出登録の動作確認

#### 新カテゴリでの支出登録
1. 各新カテゴリで以下のテストデータを登録：
   
   **システム関係日**
   - 金額: 3,000円
   - 説明: ChatGPT Plus
   - 日付: 今日
   
   **書籍代**
   - 金額: 2,500円
   - 説明: プログラミング書籍
   - 日付: 今日
   
   **家賃・水道・光熱・通信費**
   - 金額: 85,000円
   - 説明: 家賃
   - 日付: 今日

2. 各支出が正常に登録されることを確認
3. 登録後の一覧に正しく表示されることを確認

### 3. サブスクリプション管理での確認

#### サブスクリプション登録
1. 「サブスクリプション管理」ページへ移動
2. 「新規登録」をクリック
3. カテゴリドロップダウンで新カテゴリが選択可能であることを確認
4. 以下のテストデータで登録：
   - サービス名: GitHub Copilot
   - 月額料金: 1,100円
   - カテゴリ: システム関係日
   - 請求サイクル: 月額
   - 次回請求日: 来月の同日

### 4. APIレスポンスの確認

#### カテゴリAPIの確認
1. ブラウザの開発者ツールを開く（F12）
2. Networkタブを選択
3. ページをリロード
4. `/api/categories` へのリクエストを確認
5. レスポンスが以下の形式であることを確認：
   ```json
   [
     {
       "id": 1,
       "name": "家賃・水道・光熱・通信費",
       "type": "expense",
       "color": "#D35400",
       "createdAt": "...",
       "updatedAt": "..."
     },
     // ... 他のカテゴリ
   ]
   ```

### 5. エラーハンドリングの確認

#### カテゴリ作成/更新/削除の拒否
1. 開発者ツールのConsoleで以下を実行：
   ```javascript
   // カテゴリ作成の試行
   fetch('http://localhost:5174/api/categories', {
     method: 'POST',
     headers: { 'Content-Type': 'application/json' },
     body: JSON.stringify({ name: 'テスト', type: 'expense', color: '#000000' })
   }).then(res => console.log(res.status)); // 405が返ることを確認
   
   // カテゴリ更新の試行
   fetch('http://localhost:5174/api/categories/1', {
     method: 'PUT',
     headers: { 'Content-Type': 'application/json' },
     body: JSON.stringify({ name: '変更' })
   }).then(res => console.log(res.status)); // 405が返ることを確認
   
   // カテゴリ削除の試行
   fetch('http://localhost:5174/api/categories/1', {
     method: 'DELETE'
   }).then(res => console.log(res.status)); // 405が返ることを確認
   ```

### 6. データの永続性確認

1. 支出やサブスクリプションを登録
2. ページをリロード
3. 登録したデータが保持されていることを確認
4. カテゴリ情報が正しく表示されることを確認

## トラブルシューティング

### サーバーが起動していない場合
```bash
# プロセス確認
ghost list

# フロントエンドログ確認
ghost log <frontend-task-id>

# APIログ確認
ghost log <api-task-id>

# サーバー停止
ghost stop <task-id>

# サーバー再起動
cd frontend && ghost run npm run dev
cd api && ghost run npm run dev
```

### ポート競合の場合
- フロントエンド: 3000 → 3001
- API: 5173 → 5174
- `.env.local` のポート番号を実際のポートに合わせて更新

### データベースエラーの場合
```bash
cd api
npm run db:reset:dev  # データベースをリセット
```

## 確認完了条件
- [ ] すべての新カテゴリが表示される
- [ ] 新カテゴリで支出登録ができる
- [ ] 新カテゴリでサブスクリプション登録ができる
- [ ] カテゴリの作成/更新/削除が拒否される（405エラー）
- [ ] データが正しく永続化される
- [ ] エラーが発生しない