---
description: サブエージェントを使用してPRレビューに自動対応
argument-hint: <owner> <repo> <pull_number>
---

# レビューコメント自動対応

## 概要
プルリクエストのレビューコメントを専門エージェントのチェーンで対応します。
各エージェントは前のエージェントの出力を受け取り、専門的な処理を実行します。

## エージェントチェーンと依存関係

### 1. `review-reader` - コメント取得と分析
**入力**: PR番号（owner, repo, pull_number）
**処理**:
- MCPツールでレビューコメント取得
- GraphQL APIでリゾルブ状態確認
- 未解決コメントのみをフィルタリング
**出力**: 構造化されたコメント情報（JSON形式）

### 2. 専門エージェント - 修正実装
**選択される専門エージェント**:
- `frontend-developer`: UI/UXコンポーネント、クライアントサイドロジックの修正時
- `backend-developer`: API、データベース、サーバーサイドロジックの修正時

**入力**: review-readerの出力（コメント分析結果）
**処理**:
- 指摘内容に基づく修正実装
- 既存コードパターンの踏襲
- TDDサイクル（Red→Green→Refactor）での実装
- テスト・リント・型チェックの実行
**出力**: 修正完了ファイルリストと変更内容の要約

### 3. `review-responder` - レビューへの返信
**入力**: 
- review-readerの出力（コメントIDとthread_ID）
- フレームワーク専門エージェントの出力（修正内容）
**処理**:
- 修正内容を簡潔に説明する返信文作成
- GitHub APIで各コメントに返信
**出力**: 返信完了の確認

### 4. `git-operations` - コミットとプッシュ
**入力**: 
- 修正されたファイルの状態
- コメント対応の要約
**処理**:
- 変更のステージング
- 意味のあるコミットメッセージ作成
- リモートへのプッシュ
**出力**: プッシュ完了の確認

## 実行例
```
引数: owner=myorg repo=myrepo pr=123
```

## 注意事項
- 各エージェントは独立したコンテキストで動作
- エラー発生時は該当エージェントで停止し、詳細を報告
- 専門エージェントは対象ファイルに基づいて自動選択
  - フロントエンド: `frontend-developer`（UI、コンポーネント、ページ）
  - バックエンド: `backend-developer`（API、データベース、ビジネスロジック）
- 両エージェントともt-wadaのTDDとMatt Pocock氏の型定義方針に従う